JJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJ#!/usr/bin/env python
# -*- coding: utf-8 -*-
# @Time    : 2024/12/12 15:34
# @Author  : 肥鹅
# @file: LoadFile.py

import xml.etree.ElementTree as ET

class LoadFile(object):

    def __init__(self):
        pass

    def readFile(self):
        """
        读取地图路径坐标
        """


        point_lst = []
        with open("res/map/map_points_01.txt", 'r') as file:
            for line in file:
                line = line.strip()
                if line:
                    x_str, y_str, m_str, ask_str, rotate, v = line.split(',')
                    x = int(x_str.strip())
                    y = int(y_str.strip())
                    monster_select = int(m_str.strip())
                    ask = int(ask_str.strip())
                    rotate = int(rotate.strip())
                    v = int(v.strip())
                    point_lst.append([x, y, monster_select, ask, rotate, v])

        return point_lst

    def readKuangTxt(self):
        """
        读取原始矿物坐标数据
        :return:
        """
        file_path = 'res/data/kuang.txt'

        k_lst = []
        with open(file_path, 'r', encoding='utf-8') as file:
            for line in file:
                if line.strip() == "":
                    continue
                x, y = line.strip().split(",")
                k_lst.append([int(x), int(y),0,0,0,0])

        return k_lst


    def readPathFile(self):
        """
        读取 路线文件
        :param filepath: 文件路径
        :return:
        """
        lst = []
        # 解析XML文件
        tree = ET.parse('res/data/kuang_and_luxian.xml')  # 确保文件名与你的XML文件相匹配
        root = tree.getroot()

        # 遍历每个route元素
        for route in root.findall('route'):
            route_id = route.get('id')
            points = []
            for point_elem in route.findall('point'):
                # 假设每个point元素的文本内容都是逗号分隔的数值
                point_str = point_elem.text
                # 将字符串拆分成列表，并转换为整数（或浮点数，如果需要小数精度）
                point_coords = list(map(int, point_str.split(',')))
                points.append(point_coords)

            # # 打印结果
            # print(f"Route ID: {route_id} {type(route_id)}")
            # print(f"Points:{type(points)}")
            # for point in points:
            #     print(f"  {point}")
            lst.append({"id": int(route_id), "points": points})

        return lst

        # coordinates = []
        #
        # path_lst = ["res/map/map_points_01.txt", "res/map/map_points_02.txt", "res/map/map_points_03.txt", "res/map/map_points_04.txt"]
        # kuang_lst = ["","res/data/kuang_02.txt", "res/data/kuang_03.txt","res/data/kuang_04.txt"]
        #
        #
        # for i in range(len(path_lst)):
        #     test_lujing = []
        #     test_kuang = []
        #     obj = {
        #         "lujing": [],
        #         "kuang": [],
        #     }
        #
        #     path_str = path_lst[i].strip()
        #     if path_str != "":
        #         with open(path_str, 'r', encoding='utf-8') as file:
        #             for line in file:
        #                 line = line.strip()
        #     